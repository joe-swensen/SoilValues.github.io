<head>
<link href="https://fonts.googleapis.com/css?family=Montserrat:300,400,700|Roboto:400,700" rel="stylesheet">
<link href='style.css' rel='stylesheet' type='text/css'>
<title>SoilValues Results</title>
<link rel="icon" type="x-icon" href="icon.png">
<link rel="shortcut icon" type="x-icon" href="icon.png">
<meta charset="utf-8">
<script>
  version = "Test Edition #1" //Remember to update this before making changes to the test itself!
</script>
</head>
<script type="application/javascript"
        src="ideologies.js">
</script>

<body>
<h1>SoilValues</h1>
<hr>

<h1>Results</h1>
<h2>Closest Match: <span class="weight-300" id="ideology-label"></span></h2>
<style>
canvas {
    margin: auto;
    display: block;
	width: 50%;
	height: auto;
}
</style>
<canvas id="myCanvas" width="1067" height="1024" style ="border:0px solid #000000;">
</canvas>
<hr/>
<img src="" id="banner">
<button class="button" onclick="location.href='index.html';" style="background-color: #2196f3;">Back</button> <br>
<script>
    function getQueryVariable(variable)
    {
           var query = window.location.search.substring(1)
           var vars = query.split("&")
           for (var i=0;i<vars.length;i++) {
                   var pair = vars[i].split("=")
                   if(pair[0] == variable) {return pair[1]}
           }
           return(NaN);
    }
		var pSand, pSilt, pClay;
		sand = Number(getQueryVariable("n")) + 60.0;
		silt = Number(getQueryVariable("s")) + 60.0;
		clay = Number(getQueryVariable("c")) + 60.0;
		var total = sand + silt + clay;
		var pSand = sand / total;
		var pSilt = silt / total;
		var pClay = clay / total;
		var soilY = (873 * (1 - pClay)) + 19;
		var soilX = (soilY - 892)/(Math.sqrt(3)) + (7 + ((1 - pSand) * 1008))
		var c = document.getElementById("myCanvas");
		var ctx = c.getContext("2d");
		var imageObj1 = new Image();
		var imageObj2 = new Image();
		imageObj1.src = "soil.png"
		imageObj1.onload = function() {
		ctx.drawImage(imageObj1, 0, 0);
		imageObj2.src = "dot.png";
		imageObj2.onload = function() {
		  ctx.drawImage(imageObj2, soilX - 15, soilY - 15);
		  var img = c.toDataURL("image/png");
		  document.write('<img src="' + img + '" width="1067" height="1024"/>');
	   }
};
	

    </script>
</body>
